# Simple Storage Service S3

- Regionally resilient
- bucket name + key (filename)
- zero bytes to 5TB per object
- versionId, MetaData
- Access Control
- Subresources
- great for large scale data storage, distribution or upload
- can be used as input or output to many aws products
*not a file or block storage*

### Bucket
- containers for data, created within a region
- name is globally unique
- unlimited objects
- flat structure, no true folders, folders are prefixes
- 100 soft limit, 1000 hard limit

### Object 
- key : value

## S3 Security
Private by default. Only root account can access it, and everything else must be explicitly given permission.

## Bucket Policy
A type of resource policy.

- allow access from the same or different account
  - policy is attached to resource, which can then reference any identity either within or outside the account
- allow or deny anonymous principals
  - by reference all principals
- bucket can only have one policy, but that policy can have multiple statements

`black public access`
- option to override any policy or ACL that allow public access
- applies on public access, and not on aws identities (anon principals)
- disabling this doesn't give access permissions, instead it grants the ability to grant permission

## Static Website Hosting
Allow access via HTTP.

must set:
- `index` : default page, or entry point to website
- `Error` : page shown when there is an error

Website url will be automatically generated from region and bucket name.
If you want to use your own custom name, then the bucket name must match the domain.

Use cases:
1. Host blogs
2. Offloading
    - offload static media to s3, since it is cheaper than compute
    - then html that is sent to clients browser can point to the buckets for the static media
3. Out-of-band pages
    - if compute service is down, point customers to static website to give information

## Object Versioning and MFA Delete

### Object Versioning
Lets you store multiple versions of objects within a bucket.

- Operations which would modify objects generate a new version.
- versions are identified by an `id`
- when accessing an object, if an id is not specified, then the latest version of the object is used
- controlled at bucket level
- `disabled` by default, once enabled it cannot be disabled again
  - can be `suspended`, then re-enabled
  - billed for storage of all versions of objects
- when deleting a versioned object without specifying an id, a new latest version called a `delete marker` will be created
  - this hides the other versions and makes it looks like the object is deleted
  - the delete marker can be deleted, thereby making the other versions visible again (un-delete)
- when deleting an object with specifying an id
  - the object of that version will be really deleted
  - objects versions will be moved up

### MFA Delete
- Enabled in versioning configuration
- mfa is required to change bucket versioning state (enabled, suspended )
- mfa is required to delete versions

## Performance

Single PUT Upload
- default way objects are uploaded to s3
- single data stream to s3
- if a stream fails, upload fails, requires full restart
- limited to 5GB of data

Multipart Upload
- data is broken up, 
- minimum size is 100MB
- 10,000 max parts of size 5MB - 5GB
  - last part can be smaller than 5MB
- parts can fail and be restarted in isolation
- improves transfer rate, by avoiding single stream inefficiencies or limitations

Accelerated Transfer
- uses edge locations to use aws global network which is purpose built to connect regions to each other
- improve the reliability and speed of transferring data across regions over using the public network
- bucket can't have period

## Encryption

### Encryption Approaches

Encryption at Rest
- protect data while it is being stored

Encryption in Transit
- protect data while it is being transferred
- sender encrypts data before sending, receiver decrypts when it receives

- Plaintext : Un-encrypted data
- Algorithm : code that takes plain text and an encryption key to generate encrypted data
- Key : password
- Cipher text : encrypted data that is created by an algorithm taking a key and plaintext

Symmetric Encryption
- same key is used to encrypt and decrypt data

Asymmetric Encryption
- public and private key
- public encrypts but cannot decrypt, private key decrypts
- more computationally difficult than symmetric
  - sometimes used to initially agree on a symmetric key, and then the symmetric key is used 

Signing
- used to prove identity
- sender signs message with his private key
  - receiver can use sender public key to verify that the private key was used to sign the message

Steganography
- used to hide the fact that encryption was used
- cipher text is embedded in another plaintext data that serves as a medium of transportation
